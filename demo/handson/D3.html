<!DOCTYPE html>
<html>
    <head>
        <title>D3.js Tutorial</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS v5.2.1 -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <script src="https://d3js.org/d3.v6.min.js"></script>
    </head>
    <body>
        <svg width="960" height="600" style="border: solid"></svg>

        <div
            class="container"
        >
            <div
                class="row justify-content-center align-items-center g-2"
            >
                <div class="col">
                    <div class="d-grid gap-2">
                        <button
                            type="button"
                            name=""
                            id="startButton"
                            class="btn btn-primary"
                        >
                            Start
                        </button>
                    </div>

                    
                </div>

                <div class="col">
                    <div class="d-grid gap-2">
                        <button
                            type="button"
                            name=""
                            id="stopButton"
                            class="btn btn-danger"
                        >
                            Stop
                        </button>
                    </div>

            </div>
            
        </div>
        

        <script src="./D3.js"></script>
        <!-- <script>
            // D3.jsのコードをここに書きます
            // let data = [25, 30, 45, 60, 20]; // これは各バーの高さを表します

            // d3.select("svg")
            //     .selectAll("rect")
            //     .data(data)
            //     .enter()
            //     .append("rect")
            //     .attr("width", 40)
            //     .attr("height", (d) => d * 10) // データ値に基づいて高さを設定
            //     .attr("x", (d, i) => i * 50) // 各バーのX位置を設定
            //     .attr("y", (d) => 500 - d * 10) // Y位置を調整してバーを下から上に伸ばす
            //     .attr("fill", "teal"); // バーの色をティールに設定

            let data = [
                { x: 10, y: 20 },
                { x: 15, y: 35 },
                { x: 20, y: 40 },
                { x: 25, y: 60 },
                { x: 30, y: 70 },
                { x: 35, y: 85 },
            ];

            let svgWidth = 800,
                svgHeight = 500;
            let margin = { top: 20, right: 30, bottom: 40, left: 50 };
            let width = svgWidth - margin.left - margin.right;
            let height = svgHeight - margin.top - margin.bottom;

            let xScale = d3
                .scaleLinear()
                .domain([0, d3.max(data, (d) => d.x)])
                .range([0, width]);

            let yScale = d3
                .scaleLinear()
                .domain([0, d3.max(data, (d) => d.y)])
                .range([height, 0]);

            g = d3
                .select("svg")
                .attr("width", svgWidth)
                .attr("height", svgHeight)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(xScale));
            g.append("g").call(d3.axisLeft(yScale));

            g.selectAll("circle")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", (d) => xScale(d.x))
                .attr("cy", (d) => yScale(d.y))
                .attr("r", 5)
                .attr("fill", "blue");

            // d3.select("svg")
            //     .selectAll("circle")
            //     .data(data)
            //     .enter()p
            //     .append("circle")
            //     .attr("cx", (d) => d.x * 20) // x値をスケーリング
            //     .attr("cy", (d) => d.y * 5) // y値をスケーリング
            //     .attr("r", 5) // 円の半径
            //     .attr("fill", "blue"); // 円の色
        </script> -->
        <!-- <script>
            // let nodes = [{ id: "A" }, { id: "B" }, { id: "C" }, { id: "D" }];
            let nodes = [
                { id: "Node_1" },
                { id: "Node_2" },
                { id: "Node_3" },
                { id: "Node_4" },
                { id: "Node_5" },
                { id: "Node_6" },
                { id: "Node_7" },
                { id: "Node_8" },
                { id: "Node_9" },
                { id: "Node_10" },
                { id: "Node_11" },
                { id: "Node_12" },
                { id: "Node_13" },
                { id: "Node_14" },
                { id: "Node_15" },
                { id: "Node_16" },
                { id: "Node_17" },
                { id: "Node_18" },
                { id: "Node_19" },
                { id: "Node_20" },
            ];

            // let links = [
            //     { source: "A", target: "B" },
            //     { source: "B", target: "C" },
            //     { source: "C", target: "D" },
            //     { source: "D", target: "A" },
            // ];
            let links = [
                { source: "Node_4", target: "Node_17" },
                { source: "Node_11", target: "Node_6" },
                { source: "Node_18", target: "Node_6" },
                { source: "Node_19", target: "Node_2" },
                { source: "Node_2", target: "Node_20" },
                { source: "Node_5", target: "Node_19" },
                { source: "Node_10", target: "Node_14" },
                { source: "Node_1", target: "Node_9" },
                { source: "Node_6", target: "Node_4" },
                { source: "Node_20", target: "Node_18" },
                { source: "Node_14", target: "Node_13" },
                { source: "Node_5", target: "Node_8" },
                { source: "Node_17", target: "Node_3" },
                { source: "Node_8", target: "Node_17" },
                { source: "Node_7", target: "Node_4" },
                { source: "Node_10", target: "Node_4" },
                { source: "Node_1", target: "Node_16" },
                { source: "Node_3", target: "Node_4" },
                { source: "Node_13", target: "Node_17" },
                { source: "Node_16", target: "Node_3" },
                { source: "Node_15", target: "Node_9" },
                { source: "Node_5", target: "Node_16" },
                { source: "Node_8", target: "Node_19" },
                { source: "Node_13", target: "Node_14" },
                { source: "Node_8", target: "Node_20" },
                { source: "Node_2", target: "Node_18" },
                { source: "Node_4", target: "Node_7" },
            ];

            let linkForce = d3
                .forceLink(links)
                .id(function (d) {
                    return d.id;
                }) // 各ノードのIDを指定
                .distance(100);
            let simulation = d3
                .forceSimulation(nodes)
                .force("link", linkForce)
                .force("charge", d3.forceManyBody())
                .force("center", d3.forceCenter(400, 300));

            let svg = d3.select("svg");
            let link = svg
                .selectAll(".link")
                .data(links)
                .enter()
                .append("line")
                .style("stroke", "#aaa");

            let node = svg
                .selectAll(".node")
                .data(nodes)
                .enter()
                .append("circle")
                .attr("r", 20)
                .style("fill", "blue")
                .call(
                    d3
                        .drag()
                        .on("start", dragstarted)
                        .on("drag", dragged)
                        .on("end", dragended)
                );

            simulation.on("tick", () => {
                link.attr("x1", (d) => d.source.x)
                    .attr("y1", (d) => d.source.y)
                    .attr("x2", (d) => d.target.x)
                    .attr("y2", (d) => d.target.y);

                node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
            });

            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }

            function dragged(event, d) {
                d.fx = d.x;
                d.y = event.y;
            }

            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }

            function addNodeWithSelectiveChoice(event, d) {
                
            }
        </script> -->
    </body>
</html>
